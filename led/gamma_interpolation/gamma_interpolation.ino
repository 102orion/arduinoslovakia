/**
   Arduino Gamma Correction Interpolation Calculator
   v. 1.0
   Copyright (C) 2017 Robert Ulbricht
   http://www.arduinoslovakia.eu

   Based on
   https://learn.adafruit.com/led-tricks-gamma-correction?view=all

   IDE: 1.8.3 or higher
   Board: Arduino Uno

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

const uint16_t PROGMEM gamma_8b[] = {
  0,    0,    0,    0,    1,    1,    2,    3,    4,    6,    8,   10,   13,   16,   19,   24,
  28,   33,   39,   46,   53,   60,   69,   78,   88,   98,  110,  122,  135,  149,  164,  179,
  196,  214,  232,  252,  273,  295,  317,  341,  366,  393,  420,  449,  478,  510,  542,  575,
  610,  647,  684,  723,  764,  806,  849,  894,  940,  988, 1037, 1088, 1140, 1194, 1250, 1307,
  1366, 1427, 1489, 1553, 1619, 1686, 1756, 1827, 1900, 1975, 2051, 2130, 2210, 2293, 2377, 2463,
  2552, 2642, 2734, 2829, 2925, 3024, 3124, 3227, 3332, 3439, 3548, 3660, 3774, 3890, 4008, 4128,
  4251, 4376, 4504, 4634, 4766, 4901, 5038, 5177, 5319, 5464, 5611, 5760, 5912, 6067, 6224, 6384,
  6546, 6711, 6879, 7049, 7222, 7397, 7576, 7757, 7941, 8128, 8317, 8509, 8704, 8902, 9103, 9307,
  9514, 9723, 9936, 10151, 10370, 10591, 10816, 11043, 11274, 11507, 11744, 11984, 12227, 12473, 12722, 12975,
  13230, 13489, 13751, 14017, 14285, 14557, 14833, 15111, 15393, 15678, 15967, 16259, 16554, 16853, 17155, 17461,
  17770, 18083, 18399, 18719, 19042, 19369, 19700, 20034, 20372, 20713, 21058, 21407, 21759, 22115, 22475, 22838,
  23206, 23577, 23952, 24330, 24713, 25099, 25489, 25884, 26282, 26683, 27089, 27499, 27913, 28330, 28752, 29178,
  29608, 30041, 30479, 30921, 31367, 31818, 32272, 32730, 33193, 33660, 34131, 34606, 35085, 35569, 36057, 36549,
  37046, 37547, 38052, 38561, 39075, 39593, 40116, 40643, 41175, 41711, 42251, 42796, 43346, 43899, 44458, 45021,
  45588, 46161, 46737, 47319, 47905, 48495, 49091, 49691, 50295, 50905, 51519, 52138, 52761, 53390, 54023, 54661,
  55303, 55951, 56604, 57261, 57923, 58590, 59262, 59939, 60621, 61308, 62000, 62697, 63399, 64106, 64818, 65535
};

const uint16_t PROGMEM gamma_10b[] = {
  0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
  1,    1,    1,    1,    1,    1,    1,    2,    2,    2,    2,    2,    3,    3,    3,    4,
  4,    4,    5,    5,    6,    6,    6,    7,    7,    8,    9,    9,   10,   10,   11,   12,
  12,   13,   14,   15,   16,   16,   17,   18,   19,   20,   21,   22,   23,   24,   26,   27,
  28,   29,   30,   32,   33,   34,   36,   37,   39,   40,   42,   44,   45,   47,   49,   50,
  52,   54,   56,   58,   60,   62,   64,   66,   68,   70,   73,   75,   77,   80,   82,   84,
  87,   89,   92,   95,   97,  100,  103,  106,  109,  112,  115,  118,  121,  124,  127,  131,
  134,  137,  141,  144,  148,  151,  155,  159,  162,  166,  170,  174,  178,  182,  186,  190,
  195,  199,  203,  208,  212,  217,  221,  226,  231,  235,  240,  245,  250,  255,  260,  265,
  271,  276,  281,  287,  292,  298,  303,  309,  315,  321,  326,  332,  339,  345,  351,  357,
  363,  370,  376,  383,  389,  396,  403,  410,  417,  424,  431,  438,  445,  452,  460,  467,
  475,  482,  490,  498,  505,  513,  521,  529,  537,  546,  554,  562,  571,  579,  588,  597,
  605,  614,  623,  632,  641,  651,  660,  669,  679,  688,  698,  708,  717,  727,  737,  747,
  758,  768,  778,  789,  799,  810,  820,  831,  842,  853,  864,  875,  886,  898,  909,  921,
  932,  944,  956,  968,  980,  992, 1004, 1016, 1028, 1041, 1053, 1066, 1079, 1092, 1105, 1118,
  1131, 1144, 1157, 1171, 1184, 1198, 1212, 1226, 1240, 1254, 1268, 1282, 1296, 1311, 1325, 1340,
  1355, 1370, 1385, 1400, 1415, 1430, 1446, 1461, 1477, 1492, 1508, 1524, 1540, 1556, 1573, 1589,
  1606, 1622, 1639, 1656, 1673, 1690, 1707, 1724, 1741, 1759, 1776, 1794, 1812, 1830, 1848, 1866,
  1884, 1903, 1921, 1940, 1958, 1977, 1996, 2015, 2034, 2054, 2073, 2093, 2112, 2132, 2152, 2172,
  2192, 2212, 2233, 2253, 2274, 2295, 2315, 2336, 2358, 2379, 2400, 2422, 2443, 2465, 2487, 2509,
  2531, 2553, 2575, 2598, 2620, 2643, 2666, 2689, 2712, 2735, 2758, 2782, 2805, 2829, 2853, 2877,
  2901, 2925, 2950, 2974, 2999, 3024, 3049, 3074, 3099, 3124, 3149, 3175, 3201, 3227, 3252, 3279,
  3305, 3331, 3358, 3384, 3411, 3438, 3465, 3492, 3519, 3547, 3574, 3602, 3630, 3658, 3686, 3714,
  3743, 3771, 3800, 3829, 3858, 3887, 3916, 3946, 3975, 4005, 4035, 4065, 4095, 4125, 4155, 4186,
  4216, 4247, 4278, 4309, 4341, 4372, 4404, 4435, 4467, 4499, 4531, 4563, 4596, 4628, 4661, 4694,
  4727, 4760, 4794, 4827, 4861, 4894, 4928, 4962, 4997, 5031, 5065, 5100, 5135, 5170, 5205, 5240,
  5276, 5311, 5347, 5383, 5419, 5455, 5492, 5528, 5565, 5602, 5639, 5676, 5713, 5750, 5788, 5826,
  5864, 5902, 5940, 5978, 6017, 6056, 6095, 6134, 6173, 6212, 6252, 6291, 6331, 6371, 6411, 6452,
  6492, 6533, 6574, 6615, 6656, 6697, 6739, 6780, 6822, 6864, 6906, 6949, 6991, 7034, 7077, 7119,
  7163, 7206, 7249, 7293, 7337, 7381, 7425, 7469, 7514, 7558, 7603, 7648, 7693, 7739, 7784, 7830,
  7876, 7922, 7968, 8014, 8061, 8108, 8155, 8202, 8249, 8296, 8344, 8392, 8440, 8488, 8536, 8585,
  8633, 8682, 8731, 8780, 8830, 8879, 8929, 8979, 9029, 9079, 9129, 9180, 9231, 9282, 9333, 9384,
  9436, 9487, 9539, 9591, 9644, 9696, 9749, 9801, 9854, 9908, 9961, 10014, 10068, 10122, 10176, 10230,
  10285, 10339, 10394, 10449, 10504, 10560, 10615, 10671, 10727, 10783, 10840, 10896, 10953, 11010, 11067, 11124,
  11181, 11239, 11297, 11355, 11413, 11472, 11530, 11589, 11648, 11707, 11767, 11826, 11886, 11946, 12006, 12066,
  12127, 12188, 12249, 12310, 12371, 12432, 12494, 12556, 12618, 12680, 12743, 12806, 12869, 12932, 12995, 13058,
  13122, 13186, 13250, 13314, 13379, 13444, 13508, 13574, 13639, 13704, 13770, 13836, 13902, 13968, 14035, 14102,
  14168, 14236, 14303, 14370, 14438, 14506, 14574, 14643, 14711, 14780, 14849, 14918, 14987, 15057, 15127, 15197,
  15267, 15337, 15408, 15479, 15550, 15621, 15693, 15764, 15836, 15908, 15980, 16053, 16126, 16199, 16272, 16345,
  16419, 16492, 16566, 16641, 16715, 16790, 16865, 16940, 17015, 17090, 17166, 17242, 17318, 17395, 17471, 17548,
  17625, 17702, 17780, 17857, 17935, 18013, 18091, 18170, 18249, 18328, 18407, 18486, 18566, 18646, 18726, 18806,
  18887, 18967, 19048, 19129, 19211, 19292, 19374, 19456, 19539, 19621, 19704, 19787, 19870, 19953, 20037, 20121,
  20205, 20289, 20374, 20458, 20543, 20629, 20714, 20800, 20886, 20972, 21058, 21145, 21231, 21318, 21406, 21493,
  21581, 21669, 21757, 21845, 21934, 22023, 22112, 22201, 22291, 22381, 22471, 22561, 22651, 22742, 22833, 22924,
  23016, 23107, 23199, 23291, 23384, 23476, 23569, 23662, 23756, 23849, 23943, 24037, 24131, 24226, 24320, 24415,
  24511, 24606, 24702, 24798, 24894, 24990, 25087, 25184, 25281, 25378, 25476, 25574, 25672, 25770, 25868, 25967,
  26066, 26166, 26265, 26365, 26465, 26565, 26666, 26766, 26867, 26969, 27070, 27172, 27274, 27376, 27479, 27581,
  27684, 27787, 27891, 27995, 28098, 28203, 28307, 28412, 28517, 28622, 28727, 28833, 28939, 29045, 29152, 29258,
  29365, 29472, 29580, 29688, 29795, 29904, 30012, 30121, 30230, 30339, 30448, 30558, 30668, 30778, 30889, 30999,
  31110, 31222, 31333, 31445, 31557, 31669, 31782, 31894, 32008, 32121, 32234, 32348, 32462, 32577, 32691, 32806,
  32921, 33036, 33152, 33268, 33384, 33500, 33617, 33734, 33851, 33969, 34086, 34204, 34322, 34441, 34560, 34679,
  34798, 34918, 35037, 35157, 35278, 35398, 35519, 35640, 35762, 35883, 36005, 36127, 36250, 36373, 36496, 36619,
  36742, 36866, 36990, 37115, 37239, 37364, 37489, 37614, 37740, 37866, 37992, 38119, 38246, 38373, 38500, 38627,
  38755, 38883, 39012, 39140, 39269, 39398, 39528, 39658, 39788, 39918, 40048, 40179, 40310, 40442, 40573, 40705,
  40838, 40970, 41103, 41236, 41369, 41503, 41637, 41771, 41905, 42040, 42175, 42310, 42446, 42581, 42718, 42854,
  42991, 43127, 43265, 43402, 43540, 43678, 43816, 43955, 44094, 44233, 44372, 44512, 44652, 44793, 44933, 45074,
  45215, 45357, 45498, 45640, 45783, 45925, 46068, 46211, 46355, 46498, 46642, 46787, 46931, 47076, 47221, 47367,
  47512, 47658, 47805, 47951, 48098, 48245, 48393, 48541, 48689, 48837, 48986, 49134, 49284, 49433, 49583, 49733,
  49883, 50034, 50185, 50336, 50488, 50640, 50792, 50944, 51097, 51250, 51403, 51557, 51711, 51865, 52019, 52174,
  52329, 52484, 52640, 52796, 52952, 53109, 53266, 53423, 53580, 53738, 53896, 54054, 54213, 54372, 54531, 54691,
  54851, 55011, 55171, 55332, 55493, 55654, 55816, 55978, 56140, 56303, 56465, 56629, 56792, 56956, 57120, 57284,
  57449, 57614, 57779, 57945, 58110, 58277, 58443, 58610, 58777, 58944, 59112, 59280, 59449, 59617, 59786, 59955,
  60125, 60295, 60465, 60635, 60806, 60977, 61149, 61320, 61492, 61665, 61837, 62010, 62184, 62357, 62531, 62705,
  62880, 63055, 63230, 63405, 63581, 63757, 63933, 64110, 64287, 64464, 64642, 64820, 64998, 65177, 65356, 65535
};

void setup() {
  Serial.begin(9600);
  for (int i = 0; i < 1024; i++) {
    uint16_t x = pgm_read_word(&gamma_10b[i]);
    uint16_t y = pgm_read_word(&gamma_8b[i / 4]);
    uint16_t z1 = i / 4 == 0 ? 0 : pgm_read_word(&gamma_8b[i / 4 - 1]);
    uint16_t z; 
    // z = y - z;
    // z = i - (i / 4) * 4 + 1;
    // z = i % 4 + 1;
    z = (y - z1) / 4 * (i % 4 + 1) + z1;
    Serial.print(i);
    Serial.print(", ");
    Serial.print(x);
    Serial.print(", ");
    Serial.print(y);
    Serial.print(", ");
    Serial.println(z);
  }
}

void loop() {
  // put your main code here, to run repeatedly:

}
